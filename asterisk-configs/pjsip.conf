;===============PJSIP=============
[global]

;////////////////////////
;/// Transports ////////
;//////////////////////

[transport-wss]
type=transport
protocol=wss    ;udp,tcp,tls,ws,wss
bind=0.0.0.0:443
external_media_address=<public_ip>
external_signaling_address=<public_ip>
cert_file=<crt_file>
priv_key_file=<crt_key>
allow_reload=yes

[transport-nocert]
type=transport
protocol=ws    ;udp,tcp,tls,ws,wss
bind=0.0.0.0:8088
external_media_address=<public_ip>
external_signaling_address=<public_ip>


[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0
local_net=<local_ip>
external_media_address=<public_ip>
external_signaling_address=<public_ip>
allow_reload=yes


[transport-udp]
type=transport
protocol=udp   
bind=0.0.0.0
local_net=<local_ip>
external_media_address=<public_ip>
external_signaling_address=<public_ip>


;///////////////////////
;//// Endpoints ///////
;/////////////////////

[endpoint-basic](!)
type=endpoint
context=from-internal
disallow=all
allow=vp8
allow=h264
allow=ulaw
allow=t140
force_rport=yes
direct_media=no
rewrite_contact=yes
media_address=<public_ip>
rtp_symmetric=yes
ice_support=yes
message_context=internal-im

[endpoint-agent](!)
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=h264
allow=vp8
allow=t140
force_rport=yes
direct_media=no
rewrite_contact=yes
media_address=<public_ip>
rtp_symmetric=yes
ice_support=yes
use_avpf=no
force_avp=yes
trust_id_inbound=yes
media_use_received_transport=yes

[endpoint-h264](!)
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=h264
allow=t140
force_rport=yes
direct_media=no
rewrite_contact=yes
media_address=<public_ip>
rtp_symmetric=yes
ice_support=yes
use_avpf=no
force_avp=yes
trust_id_inbound=yes
media_use_received_transport=yes

[endpoint-providers](!)
type=endpoint
context=from-providers
disallow=all
allow=h264
allow=ulaw
force_rport=yes
direct_media=no
rtp_symmetric=yes
ice_support=yes
dtmf_mode=rfc4733
trust_id_inbound=yes
rewrite_contact=yes
media_use_received_transport=yes


[ZVRS](endpoint-providers)
aors=ZVRS

[ZVRS]
type=aor
contact=sip:208.95.32.104

[ZVRS] ;Identifies endpoints via source IP address
type=identify  ; Must be of type identify (default: "")
endpoint=ZVRS      ; Name of Endpoint (default: "")
match=208.95.32.104	; ZVRS IP addresses or networks to match against (default: "")



[Sworenson1](endpoint-providers)
aors=Sworenson1

[Sworenson1]
type=aor
contact=sip:209.169.226.52:5060

[Sworenson1] ;Identifies endpoints via source IP address
type=identify  ; Must be of type identify (default: "")
endpoint=Sworenson1      ; Name of Endpoint (default: "")
match=209.169.226.52  ; Sworenson1 IP addresses or networks to match against (default: "")

[Sworenson2](endpoint-providers)
aors=Sworenson2

[Sworenson2]
type=aor
contact=sip:209.169.226.162:5060

[Sworenson2] ;Identifies endpoints via source IP address
type=identify  ; Must be of type identify (default: "")
endpoint=Sworenson2      ; Name of Endpoint (default: "")
match=209.169.226.162   ; Sworenson2 IP addresses or networks to match against


;////////////////WebRTC Endpoint Profiles

[endpoint-webrtc](!)
type=endpoint
transport=transport-wss   ;was transport-wss
context=from-internal
disallow=all
allow=ulaw
allow=vp8
allow=t140
force_avp=yes
use_avpf=yes    ; Determines whether res_pjsip will use and enforce usage of
media_encryption=dtls    ; Determines whether res_pjsip will use and enforce
dtls_verify=fingerprint ; Verify that the provided peer certificate is valid (default:
dtls_fingerprint=SHA-1
dtmf_mode=auto	;was auto
dtls_rekey=5   ; Interval at which to renegotiate the TLS session and rekey
dtls_cert_file=<ss_cert>
dtls_ca_file=<ss_ca_crt>
dtls_setup=actpass
ice_support=yes   ;This is specific to clients that support NAT traversal
media_use_received_transport=yes
rtp_symmetric=yes
force_rport=no   ;was no
rewrite_contact=yes
message_context=internal-im


;////////////////////
;/// Auths /////////
;//////////////////
[auth-provider](!)
type=auth
auth_type=

[auth-userpass](!)
type=auth
auth_type=userpass

;//////////////////
;/// AORs ////////
;////////////////

[aor-single-reg](!)
type=aor
remove_existing=yes
max_contacts=1		;was 5, changed 10-5
qualify_frequency=10	;added 10-5
minimum_expiration=1	;added 10-14
default_expiration=15 ;was 30
maximum_expiration=60

[aor-tcp-reg](!)
type=aor
remove_existing=yes
max_contacts=1          ;was 5, changed 10-5


;/////////////////////////////
;//////// Extensions ////////
;///////////////////////////
[30001](endpoint-agent)
auth=auth30001
aors=30001

[auth30001](auth-userpass)
password=<password>
username=30001

[30001](aor-single-reg)

[30002](endpoint-agent)
auth=auth30002
aors=30002


[auth30002](auth-userpass)
password=<password>
username=30002

[30002](aor-single-reg)

[30003](endpoint-agent)
auth=auth30003
aors=30003

[auth30003](auth-userpass)
password=<password>
username=30003

[30003](aor-single-reg)

[30004](endpoint-agent)
auth=auth30004
aors=30004

[auth30004](auth-userpass)
password=<password>
username=30004

[30004](aor-single-reg)


[30005](endpoint-agent)
auth=auth30005
aors=30005

[auth30005](auth-userpass)
password=<password>
username=30005

[30005](aor-single-reg)

;///////////End of 3xxxx Agent Softphone Extensions

;//////////Begin 3xxxx Agent Softphone TEST
[30009](endpoint-agent)
auth=auth30009
aors=30009

[auth30009](auth-userpass)
password=<password>
username=30009

[30009](aor-tcp-reg)

[30010](endpoint-agent)
auth=auth30010
aors=30010

[auth30010](auth-userpass)
password=<password>
username=30010

[30010](aor-tcp-reg)

;//////////End 3xxxx Agent Softphone TEST

;///////////Begin 9xxxx WebRTC Extensions

;===============EXTENSION 90001

[90001](endpoint-webrtc)
auth=auth90001
aors=90001


[auth90001](auth-userpass)
password=<password>
username=90001

[90001](aor-single-reg)


;================EXTENSION 90002
[90002](endpoint-webrtc)
auth=auth90002
aors=90002

[auth90002](auth-userpass)
password=<password>
username=90002

[90002](aor-single-reg)


;================EXTENSION 90003
[90003](endpoint-webrtc)
auth=auth90003
aors=90003

[auth90003](auth-userpass)
password=<password>
username=90003

[90003](aor-single-reg)


;================EXTENSION 90004
[90004](endpoint-webrtc)
auth=auth90004
aors=90004

[auth90004](auth-userpass)
password=<password>
username=90004

[90004](aor-single-reg)


;================EXTENSION 90005
[90005](endpoint-webrtc)
auth=auth90005
aors=90005

[auth90005](auth-userpass)
password=<password>
username=90005

[90005](aor-single-reg)

;//////////// End 9xxxx WebRTC Extensions


;///////////Begin 6xxxx Consumer Softphone Extensions

;===============EXTENSION 6001

[60001](endpoint-h264)
auth=auth60001
aors=60001

[auth60001](auth-userpass)
password=<password>
username=60001

[60001](aor-single-reg)

;===============EXTENSION 60002

[60002](endpoint-h264)
auth=auth60002
aors=60002

[auth60002](auth-userpass)
password=<password>
username=60002

[60002](aor-single-reg)

;===============EXTENSION 60003

[60003](endpoint-h264)
auth=auth60003
aors=60003

[auth60003](auth-userpass)
password=<password>
username=60003

[60003](aor-single-reg)

;===============EXTENSION 60004

[60004](endpoint-h264)
auth=auth60004
aors=60004

[auth60004](auth-userpass)
password=<password>
username=60004

[60004](aor-single-reg)

;////////End 6xxxx Consumer Softphone Extensions


;////////////////////////////////
;///////// Twilio //////////////
;//////////////////////////////

[twiliotrunk](!)
        type=endpoint
        transport=transport-udp
        context=from-twilio
        disallow=all
        allow=ulaw

[auth-out](!)
type=auth
auth_type=userpass

[twilio0](twiliotrunk)
aors=twilio0-aors

[twilio0-aors]
type=aor
contact=sip:<twilio_URI>:5060

[twilio0-ident]
type=identify
endpoint=twilio0
match=54.172.60.0
match=54.172.60.1
match=54.172.60.2
match=54.172.60.3


;///////End Twilio////////


